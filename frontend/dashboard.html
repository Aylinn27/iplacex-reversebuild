<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel T√©cnico - ReverseBuild</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

    <div class="container">

        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h2 style="color: #03dac6;">Panel T√©cnico</h2>
                <p style="margin: 0;">
                    Bienvenido a <strong>Soluciones S.A.</strong>
                </p>
                <p style="margin: 0; font-size: 0.9em;">
                    Perfil: <span id="roleBadge"></span>
                </p>
            </div>
            <button 
                onclick="logout()" 
                style="width: auto; background-color: #cf6679; padding: 10px;">
                Salir
            </button>
        </div>

        <hr style="border-color: #333;">

        <div style="margin-top: 30px;">

            <div 
                id="cardNuevo"
                class="card"
                onclick="crearServicio()"
                style="cursor: pointer; text-align: center; padding: 30px;">
                <h1 style="margin: 0;">üõ†Ô∏è</h1>
                <h3>Nuevo Servicio</h3>
                <p>Iniciar proceso de desarmado</p>
            </div>

            <div 
                id="cardHist"
                class="card"
                style="cursor: not-allowed; text-align: center; padding: 30px; opacity: 0.5;">
                <h1 style="margin: 0;">üìÇ</h1>
                <h3>Historial</h3>
                <p>(M√≥dulo en construcci√≥n)</p>
            </div>
>
            <div 
                id="cardConfig"
                class="card"
                style="cursor: not-allowed; text-align: center; padding: 30px; opacity: 0.5;">
                <h1 style="margin: 0;">‚öôÔ∏è</h1>
                <h3>Configuraci√≥n</h3>
                <p>Gestionar plantillas</p>
            </div>

        </div>

        <hr style="border-color: #333; margin-top: 30px;">

        <div id="seccionRearme">
            <h3>üîÅ Generar Gu√≠a de Rearme</h3>

            <input 
                type="text"
                id="serviceId"
                placeholder="Ingrese ID del servicio"
                style="width: 100%; margin-bottom: 10px;"
            >

            <button id="btnRearme" onclick="verRearme()">Ver Gu√≠a de Rearme</button>

            <ul id="listaPasos" style="margin-top: 20px;"></ul>
        </div>

    </div>

    <script src="dashboard.js"></script>

    <script>
        const token = localStorage.getItem('token');
        if (!token) {
            window.location.href = 'index.html';
        }

        const role = localStorage.getItem('role') || 'tecnico';

        function configurarDashboardPorRol() {
            const roleBadge = document.getElementById('roleBadge');
            if (roleBadge) {
                roleBadge.textContent = (role === 'admin') ? 'Administrador' : 'T√©cnico';
            }

            const cardNuevo   = document.getElementById('cardNuevo');
            const cardHist    = document.getElementById('cardHist');
            const cardConfig  = document.getElementById('cardConfig');
            const seccionRearme = document.getElementById('seccionRearme');

            if (role === 'tecnico') {

                if (seccionRearme) {
                    seccionRearme.style.display = 'none';
                }

                if (cardHist) {
                    cardHist.style.opacity = '0.4';
                    cardHist.style.cursor = 'not-allowed';
                }

                if (cardConfig) {
                    cardConfig.style.opacity = '0.4';
                    cardConfig.style.cursor = 'not-allowed';
                }

            } else if (role === 'admin') {

                if (cardNuevo) {
                    cardNuevo.style.opacity = '0.4';
                    cardNuevo.style.cursor = 'not-allowed';
                    cardNuevo.onclick = null; 
                }

                if (seccionRearme) {
                    seccionRearme.style.display = 'block';
                }
            }
        }

        configurarDashboardPorRol();

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('role');
            localStorage.removeItem('email');
            localStorage.removeItem('serviceId');
            window.location.href = 'index.html';
        }
    </script>

</body>
</html>

