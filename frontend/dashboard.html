<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel - ReverseBuild</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 id="panelTitle" style="color: #03dac6;">Panel</h2>
            <button onclick="logout()" style="width: auto; background-color: #cf6679; padding: 10px;">
                Salir
            </button>
        </div>

        <p>
            Bienvenido a <strong>Soluciones S.A.</strong><br>
            <span id="roleLabel" style="font-size: 0.9em; color: #aaa;"></span>
        </p>
        <hr style="border-color: #333;">

        <div style="margin-top: 30px;">

            <div class="card"
                 onclick="crearServicio()"
                 style="cursor: pointer; text-align: center; padding: 30px;">
                <h1 style="margin: 0;">üõ†Ô∏è</h1>
                <h3>Nuevo Servicio</h3>
                <p>Iniciar proceso de desarmado</p>
            </div>

            <div class="card"
                 style="cursor: not-allowed; text-align: center; padding: 30px; opacity: 0.5;">
                <h1 style="margin: 0;">üìÇ</h1>
                <h3>Historial</h3>
                <p>(M√≥dulo en construcci√≥n)</p>
            </div>

            <div class="card"
                 style="cursor: not-allowed; text-align: center; padding: 30px; opacity: 0.5;">
                <h1 style="margin: 0;">‚öôÔ∏è</h1>
                <h3>Configuraci√≥n</h3>
                <p>Gestionar plantillas</p>
            </div>

        </div>

        <hr style="border-color: #333; margin-top: 30px;">

        <div id="adminRearmeBlock">
            <h3>üîÅ Generar Gu√≠a de Rearme</h3>

            <input 
                type="text"
                id="serviceId"
                placeholder="Ingrese ID del servicio"
                style="width: 100%; margin-bottom: 10px;"
            >

            <button onclick="verRearme()">Ver Gu√≠a de Rearme</button>

            <ul id="listaPasos" style="margin-top: 20px;"></ul>
        </div>

    </div>

    <script src="dashboard.js"></script>

    <script>
        (function () {
            const token = localStorage.getItem('token');
            if (!token) {
                window.location.href = 'index.html';
                return;
            }

            const role = localStorage.getItem('role') || 'tecnico';
            const email = localStorage.getItem('email') || '';

            const roleLabel = document.getElementById('roleLabel');
            const panelTitle = document.getElementById('panelTitle');
            const adminBlock = document.getElementById('adminRearmeBlock');

            if (role === 'admin') {
                panelTitle.textContent = 'Panel Administrador';
                roleLabel.textContent = `Perfil: ADMINISTRADOR (${email})`;
                if (adminBlock) adminBlock.style.display = 'block';
            } else {
                panelTitle.textContent = 'Panel T√©cnico';
                roleLabel.textContent = `Perfil: T√âCNICO (${email})`;
                if (adminBlock) adminBlock.style.display = 'none'; 
            }
        })();

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('role');
            localStorage.removeItem('email');
            localStorage.removeItem('serviceId');
            window.location.href = 'index.html';
        }
    </script>

</body>
</html>
